import { createConsole } from '../console'

import css from './style.css?raw'
import { setupListeners } from './events'
import { setupHTMLEvents } from '../refs/events'
import refs from '../refs/instance'

export class DebugElement extends HTMLElement {
  constructor() {
    super()
  }

  connectedCallback() {
    const root = this
    // const root = this.attachShadow({ mode: 'open' })

    const style = document.createElement('style')
    style.textContent = css
    root.appendChild(style)

    root.appendChild(refs['cve-player-debug-panel'])
    root.appendChild(createConsole())

    setupListeners()
    setupHTMLEvents()
  }
}

const TAG = 'cve-debug'
if (!customElements.get(TAG)) {
  customElements.define(TAG, DebugElement)
}
