import css from './console.css?raw'

export default class DebugConsole extends HTMLElement {
  constructor() {
    super()
  }

  // attributeChangedCallback(key: string, from?: string, to?: string) {
  // }

  connectedCallback() {
    const style = document.createElement('style')
    style.textContent = css
    this.appendChild(style)
  }

  disconnectedCallback() {}

  static get observedAttributes() {
    return []
  }

  log(text: string) {
    const style = this.firstChild as HTMLStyleElement
    const div = document.createElement('div')
    div.textContent = text
    div.className = 'console-text'
    style.after(div)
  }
}

export { DebugConsole }

export const createConsole = () => {
  const TAG = 'debug-console'
  if (!customElements.get(TAG)) {
    customElements.define(TAG, DebugConsole)
  }
  return document.createElement(TAG) as DebugConsole
}

export const defineConsole = () => {
  const TAG = 'debug-console'
  if (!customElements.get(TAG)) {
    customElements.define(TAG, DebugConsole)
  }
}

