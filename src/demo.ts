import { emitUIInteraction, player } from '@cve-ts/player'
import './element/custom-element'

const fly = () => {
  setTimeout(() => {
    const Data = {
      ArmLength: 182103.671875,
      Duration: 3,
      Location: [-150933.81522, -23069.396282, 25299.628117],
      Rotation: [0, -25.206932, -68.69767],
    }
    emitUIInteraction({ Command: ' ', Data })
  }, 1000 * 3)
}

const onStart = (evt: CustomEvent<unknown>) => {
  console.log('connect ===> ', evt.detail)
  fly()
}

interface DebugDetail {
  text?: string
  ui?: unknown
}
const onDebug = (evt: CustomEvent<DebugDetail>) => {
  if (evt.detail.text) {
    console.log('debug text ===> ', evt.detail.text)
  }
  if (evt.detail.ui) {
    console.log('debug ui ===> ', evt.detail.ui)
  }
}

player.addEventListener('start', onStart)
player.addEventListener('debug', onDebug)
